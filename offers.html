<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Special Offers - Nona Beauty</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .offers-page {
            min-height: 100vh;
            padding: 40px 0;
        }

        .page-hero {
            background: linear-gradient(135deg, rgba(214, 51, 132, 0.9), rgba(111, 66, 193, 0.9));
            color: white;
            padding: 80px 0;
            text-align: center;
            margin-bottom: 40px;
        }

        .page-hero h1 {
            font-size: 42px;
            margin-bottom: 15px;
        }

        .page-hero p {
            font-size: 18px;
            opacity: 0.9;
        }

        .offers-banner {
            margin-bottom: 40px;
        }

        .offer-banner-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--border-radius);
            overflow: hidden;
            display: flex;
            align-items: center;
            color: white;
            box-shadow: var(--shadow);
        }

        .banner-content {
            padding: 40px;
            flex: 1;
        }

        .banner-badge {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 20px;
            display: inline-block;
        }

        .banner-content h3 {
            font-size: 32px;
            margin-bottom: 15px;
        }

        .banner-image {
            flex: 1;
            height: 300px;
        }

        .banner-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .current-offers {
            margin-bottom: 60px;
        }

        .offers-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .offers-filter {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid var(--primary-color);
            background: transparent;
            color: var(--primary-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .filter-btn.active,
        .filter-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .limited-offers {
            margin-bottom: 60px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .countdown-timer {
            display: flex;
            gap: 15px;
        }

        .timer-item {
            text-align: center;
            background: var(--white);
            padding: 15px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            min-width: 80px;
        }

        .timer-number {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            display: block;
        }

        .timer-label {
            font-size: 12px;
            color: var(--muted-text);
            text-transform: uppercase;
        }

        .limited-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .bundle-deals {
            margin-bottom: 60px;
        }

        .bundles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
        }

        .bundle-card {
            background: var(--white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            display: flex;
            transition: var(--transition);
        }

        .bundle-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .bundle-image {
            width: 150px;
            height: 200px;
        }

        .bundle-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .bundle-content {
            padding: 25px;
            flex: 1;
        }

        .bundle-content h3 {
            margin-bottom: 10px;
            color: var(--dark-text);
        }

        .bundle-description {
            color: var(--muted-text);
            margin-bottom: 15px;
            font-size: 14px;
        }

        .bundle-price {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .current-price {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .original-price {
            color: var(--muted-text);
            text-decoration: line-through;
            font-size: 16px;
        }

        .discount {
            background: var(--success-color);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
        }

        .bundle-includes {
            list-style: none;
            margin-bottom: 20px;
        }

        .bundle-includes li {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .bundle-includes i {
            color: var(--success-color);
        }

        .btn-full {
            width: 100%;
        }

        .newsletter-offer {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 60px 0;
            text-align: center;
            border-radius: var(--border-radius);
        }

        .newsletter-content h2 {
            margin-bottom: 15px;
            font-size: 32px;
        }

        .newsletter-content p {
            margin-bottom: 25px;
            opacity: 0.9;
            font-size: 18px;
        }

        .newsletter-input {
            display: flex;
            max-width: 400px;
            margin: 0 auto 15px;
        }

        .newsletter-input input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: var(--border-radius) 0 0 var(--border-radius);
            font-size: 16px;
        }

        .newsletter-input button {
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
        }

        .newsletter-note {
            font-size: 12px;
            opacity: 0.7;
        }

        @media (max-width: 768px) {
            .offer-banner-card {
                flex-direction: column;
            }

            .banner-image {
                width: 100%;
                height: 200px;
            }

            .bundles-grid {
                grid-template-columns: 1fr;
            }

            .bundle-card {
                flex-direction: column;
            }

            .bundle-image {
                width: 100%;
                height: 150px;
            }

            .offers-header,
            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .countdown-timer {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body class="english">
    <!-- Loading Screen -->
    <div class="loader" id="pageLoader">
        <div class="loader-spinner"></div>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">NB</div>
                    <div class="logo-text">
                        <h1>Nona Beauty</h1>
                        <p>Your Beauty Passion</p>
                    </div>
                </div>
                
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                
                <nav id="mainNav">
                    <ul>
                        <li><a href="index.html" class="nav-link">Home</a></li>
                        <li><a href="products.html" class="nav-link">Products</a></li>
                        <li><a href="offers.html" class="nav-link active">Offers</a></li>
                        <li><a href="tips.html" class="nav-link">Beauty Tips</a></li>
                        <li><a href="about.html" class="nav-link">About Us</a></li>
                        <li><a href="contact.html" class="nav-link">Contact</a></li>
                    </ul>
                </nav>
                
                <div class="header-actions">
                    <div class="user-actions">
                        <a href="login.html" class="auth-btn login-btn" id="loginBtn">Login</a>
                        <a href="login.html" class="auth-btn register-btn" id="registerBtn">Register</a>
                        <div class="user-menu" id="userMenu" style="display: none;">
                            <button class="user-profile-btn">
                                <i class="fas fa-user"></i>
                                <span id="userName">User</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="user-dropdown">
                                <a href="profile.html"><i class="fas fa-user-circle"></i> My Profile</a>
                                <a href="profile.html#orders"><i class="fas fa-shopping-bag"></i> My Orders</a>
                                <a href="profile.html#addresses"><i class="fas fa-map-marker-alt"></i> Shipping Addresses</a>
                                <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                            </div>
                        </div>
                    </div>
                    <div class="header-icons">
                        <div class="wishlist-icon" id="wishlistIcon">
                            <i class="far fa-heart"></i>
                            <span class="wishlist-count">0</span>
                        </div>
                        <div class="cart-icon" id="cartIcon">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="offers-page">
        <!-- Hero Section -->
        <section class="page-hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Special Offers</h1>
                    <p>Exclusive deals and discounts on your favorite beauty products</p>
                </div>
            </div>
        </section>

        <!-- Featured Offers -->
        <section class="featured-offers">
            <div class="container">
                <h2 class="section-title">Featured Deals</h2>
                <div class="offers-banner">
                    <div class="offer-banner-card mega-deal">
                        <div class="banner-content">
                            <span class="banner-badge">Mega Deal</span>
                            <h3>Up to 50% OFF</h3>
                            <p>On selected skincare products</p>
                            <a href="#current-offers" class="btn btn-primary">Shop Now</a>
                        </div>
                        <div class="banner-image">
                            <img src="https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?w=600" alt="Mega Deal">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Current Offers -->
        <section class="current-offers" id="current-offers">
            <div class="container">
                <div class="offers-header">
                    <h2>Current Offers</h2>
                    <div class="offers-filter">
                        <button class="filter-btn active" data-filter="all">All Offers</button>
                        <button class="filter-btn" data-filter="skincare">Skincare</button>
                        <button class="filter-btn" data-filter="haircare">Haircare</button>
                        <button class="filter-btn" data-filter="perfumes">Perfumes</button>
                    </div>
                </div>

                <div class="products-grid" id="offersGrid">
                    <!-- Discounted products will be loaded by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Limited Time Offers -->
        <section class="limited-offers">
            <div class="container">
                <div class="section-header">
                    <h2>Limited Time Offers</h2>
                    <div class="countdown-timer" id="countdownTimer">
                        <div class="timer-item">
                            <span class="timer-number" id="days">07</span>
                            <span class="timer-label">Days</span>
                        </div>
                        <div class="timer-item">
                            <span class="timer-number" id="hours">23</span>
                            <span class="timer-label">Hours</span>
                        </div>
                        <div class="timer-item">
                            <span class="timer-number" id="minutes">59</span>
                            <span class="timer-label">Minutes</span>
                        </div>
                        <div class="timer-item">
                            <span class="timer-number" id="seconds">59</span>
                            <span class="timer-label">Seconds</span>
                        </div>
                    </div>
                </div>

                <div class="limited-products-grid" id="limitedProducts">
                    <!-- Limited time products will be loaded by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Bundle Deals -->
        <section class="bundle-deals">
            <div class="container">
                <h2 class="section-title">Bundle Deals</h2>
                <div class="bundles-grid">
                    <div class="bundle-card">
                        <div class="bundle-image">
                            <img src="https://images.unsplash.com/photo-1556228578-8c89e6adf883?w=300" alt="Skincare Bundle">
                        </div>
                        <div class="bundle-content">
                            <h3>Complete Skincare Routine</h3>
                            <p class="bundle-description">Cleanser, toner, serum, and moisturizer - everything you need for perfect skin</p>
                            <div class="bundle-price">
                                <span class="current-price">450 EGP</span>
                                <span class="original-price">600 EGP</span>
                                <span class="discount">25% OFF</span>
                            </div>
                            <ul class="bundle-includes">
                                <li><i class="fas fa-check"></i> Gentle Cleanser 200ml</li>
                                <li><i class="fas fa-check"></i> Hydrating Toner 150ml</li>
                                <li><i class="fas fa-check"></i> Vitamin C Serum 30ml</li>
                                <li><i class="fas fa-check"></i> Daily Moisturizer 50ml</li>
                            </ul>
                            <button class="btn btn-primary btn-full add-bundle" data-bundle="skincare">
                                Add Bundle to Cart
                            </button>
                        </div>
                    </div>

                    <div class="bundle-card">
                        <div class="bundle-image">
                            <img src="https://images.unsplash.com/photo-1625772299848-391b6a87d5b6?w=300" alt="Haircare Bundle">
                        </div>
                        <div class="bundle-content">
                            <h3>Luxury Haircare Set</h3>
                            <p class="bundle-description">Transform your hair with our premium haircare collection</p>
                            <div class="bundle-price">
                                <span class="current-price">330 EGP</span>
                                <span class="original-price">425 EGP</span>
                                <span class="discount">22% OFF</span>
                            </div>
                            <ul class="bundle-includes">
                                <li><i class="fas fa-check"></i> Nourishing Shampoo 400ml</li>
                                <li><i class="fas fa-check"></i> Repairing Conditioner 400ml</li>
                                <li><i class="fas fa-check"></i> Hair Mask 300ml</li>
                                <li><i class="fas fa-check"></i> Argan Oil 100ml</li>
                            </ul>
                            <button class="btn btn-primary btn-full add-bundle" data-bundle="haircare">
                                Add Bundle to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Newsletter -->
        <section class="newsletter-offer">
            <div class="container">
                <div class="newsletter-content">
                    <h2>Get Exclusive Offers</h2>
                    <p>Subscribe to our newsletter and be the first to know about new products and special promotions</p>
                    <form class="newsletter-form" id="newsletterForm">
                        <div class="newsletter-input">
                            <input type="email" placeholder="Enter your email address" required>
                            <button type="submit" class="btn btn-primary">Subscribe</button>
                        </div>
                        <p class="newsletter-note">By subscribing, you agree to our Privacy Policy</p>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Nona Beauty</h3>
                    <p>Your trusted partner in beauty and skincare. We provide high-quality products for your beauty journey.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="offers.html">Offers</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Customer Service</h3>
                    <ul class="footer-links">
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Returns & Exchanges</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Info</h3>
                    <div class="contact-info">
                        <p><i class="fas fa-envelope"></i> info@nonabeauty.com</p>
                        <p><i class="fas fa-phone"></i> +1 (555) 123-4567</p>
                        <p><i class="fas fa-map-marker-alt"></i> 123 Beauty Street, NY 10001</p>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2024 Nona Beauty. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript Files -->
    <script src="assets/js/main.js"></script>
    <script>
        // نظام العروض
        class OffersPage {
            constructor() {
                this.discountedProducts = [];
                this.currentFilter = 'all';
                this.init();
            }

            init() {
                this.loadDiscountedProducts();
                this.setupEventListeners();
                this.displayOffers();
                this.startCountdownTimer();
                this.checkUrlParameters();
            }

            loadDiscountedProducts() {
                if (window.nonaBeautyApp && window.nonaBeautyApp.products) {
                    this.discountedProducts = window.nonaBeautyApp.getDiscountedProducts();
                } else {
                    // إذا لم يكن التطبيق الرئيسي محملاً، قم بتحميل المنتجات مباشرة
                    const productsData = localStorage.getItem('nonaBeautyProducts');
                    if (productsData) {
                        const allProducts = JSON.parse(productsData);
                        this.discountedProducts = allProducts.filter(product => 
                            product.discount && product.discount > 0
                        );
                    }
                }
            }

            setupEventListeners() {
                // أزرار الفلتر
                const filterBtns = document.querySelectorAll('.filter-btn');
                filterBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const filter = e.target.dataset.filter;
                        this.filterOffers(filter);
                        
                        // تحديث الزر النشط
                        filterBtns.forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                    });
                });

                // إضافة الباقات إلى السلة
                document.querySelectorAll('.add-bundle').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const bundleType = e.target.dataset.bundle;
                        this.addBundleToCart(bundleType);
                    });
                });

                // النشرة الإخبارية
                const newsletterForm = document.getElementById('newsletterForm');
                if (newsletterForm) {
                    newsletterForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleNewsletterSignup(newsletterForm);
                    });
                }
            }

            filterOffers(filter) {
                this.currentFilter = filter;
                this.displayOffers();
            }

            displayOffers() {
                const offersGrid = document.getElementById('offersGrid');
                if (!offersGrid) return;

                let filteredProducts = this.discountedProducts;

                if (this.currentFilter !== 'all') {
                    filteredProducts = this.discountedProducts.filter(product => 
                        product.category === this.currentFilter
                    );
                }

                if (filteredProducts.length === 0) {
                    offersGrid.innerHTML = `
                        <div class="no-offers" style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                            <i class="fas fa-tag" style="font-size: 48px; color: #e2e8f0; margin-bottom: 20px;"></i>
                            <h3>No offers available</h3>
                            <p>Check back later for new promotions</p>
                        </div>
                    `;
                    return;
                }

                offersGrid.innerHTML = filteredProducts.map(product => 
                    window.nonaBeautyApp.createProductCard(product)
                ).join('');

                // إرفاق أحداث المنتجات
                if (window.nonaBeautyApp) {
                    window.nonaBeautyApp.attachProductEventListeners();
                }
            }

            startCountdownTimer() {
                const countdownDate = new Date();
                countdownDate.setDate(countdownDate.getDate() + 7); // 7 أيام من الآن

                function updateCountdown() {
                    const now = new Date().getTime();
                    const distance = countdownDate - now;

                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    // تحديث العرض
                    const daysEl = document.getElementById('days');
                    const hoursEl = document.getElementById('hours');
                    const minutesEl = document.getElementById('minutes');
                    const secondsEl = document.getElementById('seconds');

                    if (daysEl) daysEl.textContent = days.toString().padStart(2, '0');
                    if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
                    if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, '0');
                    if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, '0');

                    if (distance < 0) {
                        clearInterval(countdownTimer);
                        // إعادة ضبط المؤقت للأسبوع القادم
                        setTimeout(() => {
                            this.startCountdownTimer();
                        }, 1000);
                    }
                }

                // التحديث فوراً ثم كل ثانية
                updateCountdown();
                const countdownTimer = setInterval(updateCountdown, 1000);
            }

            addBundleToCart(bundleType) {
                if (window.nonaBeautyApp) {
                    // إنشاء منتج افتراضي للباقة
                    const bundleProduct = {
                        id: `bundle-${bundleType}-${Date.now()}`,
                        name: `${bundleType === 'skincare' ? 'Complete Skincare Routine' : 'Luxury Haircare Set'} Bundle`,
                        price: bundleType === 'skincare' ? 450 : 330,
                        image: bundleType === 'skincare' ? 
                            'https://images.unsplash.com/photo-1556228578-8c89e6adf883?w=300' : 
                            'https://images.unsplash.com/photo-1625772299848-391b6a87d5b6?w=300',
                        description: `Special ${bundleType} bundle package`
                    };

                    window.nonaBeautyApp.addToCart(bundleProduct);
                    this.showNotification('Bundle added to cart!', 'success');
                }
            }

            handleNewsletterSignup(form) {
                const email = form.querySelector('input[type="email"]').value;
                
                // محاكاة استدعاء API
                setTimeout(() => {
                    this.showNotification('Successfully subscribed to newsletter!', 'success');
                    form.reset();
                }, 1000);
            }

            checkUrlParameters() {
                const urlParams = new URLSearchParams(window.location.search);
                const productId = urlParams.get('product');
                
                if (productId) {
                    // إذا كان هناك منتج محدد في الرابط، قم بالتمرير إليه
                    setTimeout(() => {
                        const productElement = document.querySelector(`[data-product-id="${productId}"]`);
                        if (productElement) {
                            productElement.scrollIntoView({ 
                                behavior: 'smooth',
                                block: 'center'
                            });
                            
                            // إضافة تمييز بسيط
                            productElement.style.boxShadow = '0 0 0 3px var(--primary-color)';
                            setTimeout(() => {
                                productElement.style.boxShadow = '';
                            }, 3000);
                        }
                    }, 1000);
                }
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                `;

                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#d63384'};
                    color: white;
                    padding: 15px 25px;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    z-index: 3000;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                `;

                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.style.opacity = '0';
                    setTimeout(() => {
                        if (document.body.contains(notification)) {
                            document.body.removeChild(notification);
                        }
                    }, 300);
                }, 3000);
            }
        }

        // تهيئة صفحة العروض
        document.addEventListener('DOMContentLoaded', function() {
            // الانتظار حتى يتم تحميل التطبيق الرئيسي
            if (window.nonaBeautyApp) {
                new OffersPage();
            } else {
                // إذا لم يكن التطبيق الرئيسي محملاً بعد، انتظر قليلاً
                setTimeout(() => {
                    new OffersPage();
                }, 500);
            }
        });
    </script>
</body>
</html>
